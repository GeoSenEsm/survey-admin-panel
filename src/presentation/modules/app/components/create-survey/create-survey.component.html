<div class="container">
    <mat-card class="card">
        <mat-card-header class="survey-name-input">
            <mat-form-field class="full-width" appearance="fill">
                <input matInput [(ngModel)]="model.name" (blur)="validateName()"
                [errorStateMatcher]="surveyNameErrorStateMatcher"/>
                <mat-error *ngIf="nameValidationError != null">{{ nameValidationError }}</mat-error>
            </mat-form-field>
        </mat-card-header>
        <mat-card-content>
            <button *ngIf="model.sections.length === 0"
            mat-button color="primary"
            class="create-section-button"
            (click)="addSection(0)">
                Dodaj sekcjÄ™
            </button>
            <mat-error *ngIf="numberOfSectionsError != null">{{ numberOfSectionsError }}</mat-error>
            <app-create-section *ngFor="let section of model.sections; let i = index" 
            [sectionNumber]="i + 1"
            (addSectionBelowEvent)="addSectionBelow($event)"
            (removeSectionEvent)="removeSection($event)"
            [section]="section"
            [sectionsToBeTriggered]="sectionsToBeTriggered"/>
        </mat-card-content>
        <mat-card-footer>
            <button mat-flat-button color="primary"
                appearance="outline"
                (click)="save()">
                Zapisz
            </button>
        </mat-card-footer>
    </mat-card>
    
</div>